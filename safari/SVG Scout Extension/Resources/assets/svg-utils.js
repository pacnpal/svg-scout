function o(e){let t=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);t=(t<<5)-t+s,t=t&t}return Math.abs(t).toString(36)}function c(e){let t=e.trim();return t.includes("xmlns")||(t=t.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"')),t}function l(e){if(!e||typeof e!="string")return!1;const t=e.trim();if(!t.startsWith("<svg")&&!t.startsWith("<?xml")||!t.includes("</svg>")&&!t.includes("/>"))return!1;try{return!new DOMParser().parseFromString(e,"image/svg+xml").querySelector("parsererror")}catch{return!1}}function g(e){try{const s=new DOMParser().parseFromString(e,"image/svg+xml").documentElement;let n=parseFloat(s.getAttribute("width")||"0"),a=parseFloat(s.getAttribute("height")||"0");if((!n||!a)&&s.hasAttribute("viewBox")){const i=s.getAttribute("viewBox").split(/\s+|,/).map(Number);i.length===4&&(n=n||i[2],a=a||i[3])}return{width:n||100,height:a||100}}catch{return{width:100,height:100}}}function m(e,t,r){const s=c(e);if(!l(s))return null;const n=g(s);return{id:o(s),content:s,source:t,sourceUrl:r,dimensions:n,fileSize:new Blob([s]).size}}function h(e){const t=new Map;for(const r of e)t.has(r.id)||t.set(r.id,r);return Array.from(t.values())}function d(e,t,r){const s=r?`${u(r)}-`:"";if(e.name){const n=e.name.endsWith(".svg")?e.name:`${e.name}.svg`;return s+n}if(e.sourceUrl){const a=new URL(e.sourceUrl,"https://example.com").pathname.split("/"),i=a[a.length-1];if(i&&i.includes(".svg"))return s+i}return`${s}svg-${t+1}.svg`}function u(e){return e.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,30).toLowerCase()}function f(e){try{if(e.startsWith("data:image/svg+xml;base64,")){const t=e.slice(26);return atob(t)}if(e.startsWith("data:image/svg+xml,")){const t=e.slice(19);return decodeURIComponent(t)}if(e.startsWith("data:image/svg+xml;charset=utf-8,")){const t=e.slice(33);return decodeURIComponent(t)}return null}catch{return null}}function v(e){try{const r=new URL(e,"https://example.com").pathname.toLowerCase();return r.endsWith(".svg")||r.endsWith(".svgz")}catch{return!1}}function p(e){return e.startsWith("data:image/svg+xml")}export{v as a,h as b,m as c,f as d,d as g,p as i};
