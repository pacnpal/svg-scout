async function R(l,g){const{scale:i,backgroundColor:o}=g,e=new DOMParser().parseFromString(l,"image/svg+xml").documentElement;let t=parseFloat(e.getAttribute("width")||"0"),r=parseFloat(e.getAttribute("height")||"0");if((!t||!r)&&e.hasAttribute("viewBox")){const s=e.getAttribute("viewBox").split(/\s+|,/).map(Number);s.length===4&&(t=t||s[2],r=r||s[3])}t=t||100,r=r||100;const d=t*i,m=r*i;e.setAttribute("width",String(t)),e.setAttribute("height",String(r));const p=new XMLSerializer().serializeToString(e),f=new Blob([p],{type:"image/svg+xml;charset=utf-8"}),w=URL.createObjectURL(f);return new Promise((s,u)=>{const a=new Image;a.onload=()=>{const c=document.createElement("canvas");c.width=d,c.height=m;const h=c.getContext("2d");o&&o!=="transparent"&&(h.fillStyle=o,h.fillRect(0,0,d,m)),h.drawImage(a,0,0,d,m),URL.revokeObjectURL(w),c.toBlob(v=>{v?s(v):u(new Error("Failed to create PNG blob"))},"image/png",1)},a.onerror=()=>{URL.revokeObjectURL(w),u(new Error("Failed to load SVG image"))},a.src=w})}async function x(l,g){const i=await R(l,g);return new Promise((o,b)=>{const n=new FileReader;n.onloadend=()=>o(n.result),n.onerror=b,n.readAsDataURL(i)})}export{R as svgToPng,x as svgToPngDataUrl};
